PART
{
	name = Fel_delayedRetro

	module = Part
	category = Propulsion	
	subcategory = 0

	title = Odyssey Delayed Retro
	manufacturer = Felbourn Industries
	description = This retro SRB has a delayed fuse.
	author = Felbourn

	MODEL
	{
		model = KerbalStockLauncherOverhaul/Parts/Engine/KX sepmotor/model
	}
	scale = 1
	rescaleFactor = 1

	node_attach = 0.0, 0.0, 0.0,   0.0, 0.0, 1.0,   1
	attachRules = 0,1,0,0,0

	TechRequired = generalRocketry
	entryCost = 1100
	cost = 100

	mass = 0.001 // MFT

	dragModelType = default
	maximum_drag = 0.3
	minimum_drag = 0.2
	angularDrag = 2

	crashTolerance = 1
	maxTemp = 1

	ActivatesEvenIfDisconnected = true

	stagingIcon = SOLID_BOOSTER

	MODULE
	{
		name = FStextureSwitch
		DisplayName = Paint Motors
		showListButton = false
		moduleID = 0
		switchableInFlight = False
		debugMode = False
		textures
		{
			name = KerbalStockLauncherOverhaul/Parts/Engine/KX sepmotor/Periapsis Original
			name = KerbalStockLauncherOverhaul/Parts/Engine/KX sepmotor/Kerbal Space Program
			name = KerbalStockLauncherOverhaul/Parts/Engine/KX sepmotor/NASA Kerbal
			name = KerbalStockLauncherOverhaul/Parts/Engine/KX sepmotor/Plain White
			name = KerbalStockLauncherOverhaul/Parts/Engine/KX sepmotor/Plain Black
		}
		objects
		{
			name = sepmotor
		}
	}

	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = thrustTransform
		throttleLocked = True
		exhaustDamage = True
		allowShutdown = False
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 10
		heatProduction = 230
		fxOffset = 0, 0, 0.02
        runningEffectName = running_closed
		PROPELLANT
		{
			name = HTPB
	        ratio = 1.0
			DrawGauge = True
		}
		atmosphereCurve
	 	{
			key = 0 285
			key = 1 276
	 	}		
	}
    MODULE
    {
        name = ModuleFuelTanks
        type = Odyssey_Solid
        volume = 6
    }
    MODULE
    {
        name = TweakScale
        type = Scale_Surface
    }
    MODULE
    {
        name = ModuleEngineThrustController
        minimumThrustPercent = 0.01
        canAdjustAtAnytime = false
        showItemInList = false
    }
    MODULE
    {
        name = ModuleSRBThrust
        resourceName = HTPB
        useTimeCurve = false
        thrustCurve
        {
			key = 0.00 0.01
			key = 0.05 1.00 0 0
			key = 0.93 1.00 0 0
			key = 0.98 0.10 0 0
			key = 1.00 0.10
        }
    }
    EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                clip = KWRocketry/Soundbank/sound_srbloop
                volume = 0.0 0.0
                volume = 0.4 0.4
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = Smoke
                modelName = MP_Nazari/FX/smokebooster
                transformName = thrustTransform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.08
                emission = 1.00 0.30

                // life of particles in seconds
                energy = 0.0 0.20
                energy = 1.0 0.30

                // particle speed
                speed = 0.0 0.30
                speed = 1.0 0.40
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = Flame
                modelName = MP_Nazari/FX/flamebooster
                transformName = thrustTransform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.12
                emission = 1.00 0.50

                // life of particles in seconds
                energy = 0.0 0.50
                energy = 1.0 0.90

                // particle speed
                speed = 0.0 0.40
                speed = 1.0 0.50

                // grow % per second
                grow = 0 -0.20
                grow = 1 -0.50
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperstart
                volume = 0.35
                pitch = 1.00
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = thrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
}
