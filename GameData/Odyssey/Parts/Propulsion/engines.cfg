
// heatProduction = ~35 * sqrt(TWR)

@PART[AJ10]:Final
{
    !sound_engage = engage
    !sound_loop = running
    !sound_off = disengage
    !sound_out = flameout
}

//=================================================================================================
// Kerosene + LqdOxygen ratio = 2.26
// 0.381070069 Kerosene to 0.618929931 LqdOxygen
//=================================================================================================
@PART[KW3mengineTitanT1]:Final
{
    @title = Odyssey Core Booster Engine
    !MODEL,1 {} // shroud
    @mass = 4             // TWR = 67.5
    @maxTemp = 2300
    !MODULE[TweakScale] {}
    MODULE
    {
        name = TweakScale
        type = Scale_Stack
        defaultScale = 3.75
    }
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 2650 // atmo
        @heatProduction = 290
        @useEngineResponseTime = False
        @PROPELLANT[LiquidFuel]
        {
            @name = Kerosene
            @ratio = 0.381070069
        }
        @PROPELLANT[Oxidizer]
        {
            @name = LqdOxygen
            @ratio = 0.618929931
        }
        @atmosphereCurve
        {
            @key,0 = 0 185
            @key,1 = 1 165
        }
    }
    !MODULE[ModuleAlternator] {}
    @EFFECTS
    {
        @running_closed
        {
            @AUDIO
            {
                @clip = KWRocketry/Soundbank/sound_altloop2
                @volume,1 = 0.1 0.4
                volume = 1.0 1.0
            }
            !PREFAB_PARTICLE {}
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = smokethrust
                modelName = MP_Nazari/FX/smokebooster
                transformName = FX2Transform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 1.45
                emission = 1.00 5.00

                // life of particles in seconds
                energy = 0.00 1.10
                energy = 1.00 1.20

                // particle speed
                speed = 0.00 0.10
                speed = 1.00 0.05

                // emitter position
                offset = 0.00 -6.0
                offset = 1.00 -4.5

                // grow % per second
                grow = 0.00 0.60
                grow = 1.00 0.90
            }
            !MODEL_MULTI_PARTICLE {}
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamethrust
                modelName = Squad/FX/ksX_Exhaust
                transformName = FX2Transform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.41
                emission = 1.00 1.50

                // life of particles in seconds
                energy = 0.00 0.7
                energy = 1.00 0.8

                // particle speed
                speed = 0.00 0.4
                speed = 1.00 0.8

                // emitter position
                offset = 0.00 0.0
                offset = 1.00 -0.2

                // grow % per second
                grow = 0.00 -0.8
                grow = 1.00 -0.5
            }
        }
        @engage
        {
            @AUDIO
            {
                @clip = KWRocketry/Soundbank/sound_liq8
            }
        }
    }
}

//-------------------------------------------------------------------------------------------------
@PART[Size3AdvancedEngine]:Final
{
    @title = Odyssey Second Stage Engine
    @mass = 2.65       // TWR = 25
    @maxTemp = 2300
    @node_stack_bottom = 0.0, -2.536873, 0.0, 0.0, 1.0, 0.0, 0 // remove fairing
    node_stack_bottom2 = 0.0, -2.536873, 0.0, 0.0, 1.0, 0.0, 3
    @attachRules = 1,0,1,1,0
    !MODULE[ModuleAlternator] {}
    @MODULE[TweakScale]
    {
        @type = Scale_Stack
    }
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 650 // atmo
        @heatProduction = 175
        @useEngineResponseTime = False
        @PROPELLANT[LiquidFuel]
        {
            @name = Kerosene
            @ratio = 0.381070069
        }
        @PROPELLANT[Oxidizer]
        {
            @name = LqdOxygen
            @ratio = 0.618929931
        }
        @atmosphereCurve
        {
            @key,0 = 0 310
            @key,1 = 1 120
        }
    }
    !EFFECTS {}
    EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                clip = sound_rocket_hard
                volume = 0.0 0.0
                volume = 1.0 1.0
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                modelName = fx_smokeTrail_veryLarge
                //modelName = MP_Nazari/FX/smokebooster
                transformName = thrustTransform
                emission = 0.00 0.00
                emission = 0.10 0.40
                emission = 1.00 1.25
                speed = 0.0 0.25
                speed = 1.0 1.00
                localOffset = 0, 0, 1
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                modelName = Squad/FX/ksX_Exhaust
                transformName = thrustTransform
                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.26
                emission = 1.00 1.00

                // life of particles in seconds
                energy = 0.00 0.9
                energy = 1.00 0.8

                // particle speed
                speed = 0.0 0.2
                speed = 1.0 0.4

                // emitter position
                offset = 0 1.1
                offset = 1 1.2

                // grow % per second
                grow = 0.00 -0.9
                grow = 1.00 -0.8
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = fxPoint
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
}


//=================================================================================================
// UDMH + NTO
//=================================================================================================
@PART[OME]:Final
{
    @title = Odyssey Satellite Engine
    @node_stack_top = 0.0, -0.1, 0.0,       0.0, 1.0, 0.0,  1 // payload
    @node_stack_top1 = 0.0, -0.1, 0.0,      0.0, 1.0, 0.0,  0 // toroidal tank
    node_stack_mid = 0.0, -0.2, 0.0,        0.0, 1.0, 0.0,  2 // decoupler
    @node_stack_bottom = 0.0, -0.8, 0.0,    0.0, 1.0, 0.0,  1 // engine bottom (probably not used)
    @mass = 0.15      // TWR = 17.0
    @maxTemp = 2300
    !fx_exhaustFlame_blue_small = DELETE
    !fx_exhaustLight_blue = DELETE
    !fx_smokeTrail_light  = DELETE
    !sound_engage = DELETE
    !sound_loop = DELETE
    !sound_off = DELETE
    !sound_out = DELETE
    !MODULE[TweakScale] {}
    MODULE
    {
        name = TweakScale
        type = Scale_Stack
    }
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 25 // vacuum rated
        @heatProduction = 145
        @PROPELLANT[LiquidFuel]
        {
            @name = UDMH
            @ratio = 0.466073093
        }
        @PROPELLANT[Oxidizer]
        {
            @name = NTO
            @ratio = 0.533926907
        }
        @atmosphereCurve
        {
            @key,0 = 0 350
            @key,1 = 1 120
        }
    }
    !EFFECTS {}
    EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                clip = KWRocketry/Soundbank/sound_spsloop
                volume = 0.0 0.0
                volume = 1.0 1.0
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamethrust
                modelName = AerojetKerbodyne/FX/OMEFlame
                transformName = thrustTransform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.33
                emission = 1.00 1.20

                // life of particles in seconds
                energy = 0.0 1.2
                energy = 1.0 1.1

                // particle speed
                speed = 0.00 0.7
                speed = 1.00 0.8

                // emitter position
                offset = 0.0 -0.1
                offset = 1.0 0.0

                // grow % per second
                grow = 0.00 8.0
                grow = 1.00 10.0
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperstart
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout
                transformName = thrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperout
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
    !MODULE[ModuleGimbal] {}
}

//-------------------------------------------------------------------------------------------------
@PART[bahaSRadialEngine]:Final
{
    @title = Odyssey Retractable Engine
    @mass = 0.5      // TWR = 16.3
    @maxTemp = 2300
    MODULE
    {
        name = TweakScale
        type = Scale_Surface
        defaultScale = 1.5
    }
    @MODULE[ModuleEngines]
    {
        @name = ModuleEnginesFX
        @maxThrust = 80 // vacuum rated
        @heatProduction = 200
        %runningEffectName = running_closed
        @PROPELLANT[LiquidFuel]
        {
            @name = UDMH
            @ratio = 0.466073093
        }
        @PROPELLANT[Oxidizer]
        {
            @name = NTO
            @ratio = 0.533926907
        }
        @atmosphereCurve
        {
            @key,0 = 0 339
            @key,1 = 1 120
        }
    }
    !MODULE[ModuleAlternator] {}

    !fx_exhaustFlame_blue_small = DELETE
    !fx_exhaustLight_blue = DELETE
    !fx_smokeTrail_light  = DELETE
    !fx_exhaustSparks_flameout  = DELETE
    !sound_vent_medium = DELETE
    !sound_rocket_hard = DELETE
    !sound_vent_soft = DELETE
    !sound_explosion_low = DELETE

    !EFFECTS effects {}
    EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                clip = KWRocketry/Soundbank/sound_spsloop
                volume = 0.0 0.0
                volume = 1.0 1.0
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamethrust
                modelName = MP_Nazari/FX/flamenukeblue
                transformName = thrustTransform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.25
                emission = 1.00 1.10

                // life of particles in seconds
                energy = 0.0 1.3
                energy = 1.0 1.0

                // particle speed
                speed = 0.00 0.3
                speed = 1.00 0.5

                // emitter position
                offset = 0.0 0.3
                offset = 1.0 0.4

                // emitter size
                size = 0 0.8
                size = 1 0.7
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperstart
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout
                transformName = thrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperout
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
}

//-------------------------------------------------------------------------------------------------
@PART[bahaTrrEngine]:Final
{
    @title = Odyssey Radial Engine
    @mass = 0.125
    @maxTemp = 2300
    MODULE
    {
        name = TweakScale
        type = Scale_Surface
    }
    @MODULE[ModuleEngines]
    {
        @maxThrust = 20 // vacuum rated
        @heatProduction = 280
        @PROPELLANT[LiquidFuel]
        {
            @name = UDMH
            @ratio = 0.466073093
        }
        @PROPELLANT[Oxidizer]
        {
            @name = NTO
            @ratio = 0.533926907
        }
        @atmosphereCurve
        {
            @key,0 = 0 339
            @key,1 = 1 120
        }
    }
}


//-------------------------------------------------------------------------------------------------
// LqdHydrogen + LqdOxygen ratio = 5.00
// 0.763083096 LqdHydrogen to 0.236916904 LqdOxygen
//-------------------------------------------------------------------------------------------------
@PART[HG10B2]:Final
{
    @title = Centaur III Engine
    @node_stack_top1 = 0.0, 0.74, 0,       0.0, 1.0, 0.0,   2
    @mass = 0.7       // TWR = 14.6
    @maxTemp = 2300
    !sound_engage = DELETE
    !sound_loop = DELETE
    !sound_off = DELETE
    !sound_out = DELETE
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 100
        @heatProduction = 135
        @useEngineResponseTime = False
        @PROPELLANT[LiquidFuel]
        {
            @name = LqdHydrogen
            @ratio = 0.763083096
        }
        @PROPELLANT[Oxidizer]
        {
            @name = LqdOxygen
            @ratio = 0.236916904
        }
        @atmosphereCurve
        {
            @key,0 = 0 440
            @key,1 = 1 100
        }
    }
    !MODULE[TweakScale] {}
    MODULE
    {
        name = TweakScale
        type = Scale_Stack
        defaultScale = 2.5
    }
    @EFFECTS
    {
        @running_closed
        {
            !PREFAB_PARTICLE {}
            !MODEL_MULTI_PARTICLE {}
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamethrust
                modelName = AerojetKerbodyne/FX/AK10Flame
                transformName = thrustTransform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.05 0.60
                emission = 1.00 2.20

                // life of particles in seconds
                energy = 0.0 0.80
                energy = 1.0 1.20

                // particle speed
                speed = 0.0 0.60
                speed = 1.0 0.90

                // grow % per second
                grow = 0.0 3.00
                grow = 1.0 4.00
                
                offset = 0 0.20
                offset = 1 0.10
            }
        }
    }
}
