
// heatProduction = ~35 * sqrt(TWR)

@PART[AJ10]:Final
{
    !sound_engage = engage
    !sound_loop = running
    !sound_off = disengage
    !sound_out = flameout
}

//=================================================================================================
// Kerosene + LqdOxygen ratio = 2.26
// 0.381070069 Kerosene to 0.618929931 LqdOxygen
//=================================================================================================
@PART[KW3mengineTitanT1]:Final
{
    @title = Odyssey Core Booster Engine
    !MODEL,1 {} // shroud
    @mass = 4.2
    @maxTemp = 2300
    !MODULE[TweakScale] {}
    MODULE
    {
        name = TweakScale
        type = Scale_Stack
        defaultScale = 3.75
    }
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 2650 // atmo
        @heatProduction = 260
        @useEngineResponseTime = False
        @PROPELLANT[LiquidFuel]
        {
            @name = Kerosene
            @ratio = 0.381070069
        }
        @PROPELLANT[Oxidizer]
        {
            @name = LqdOxygen
            @ratio = 0.618929931
        }
        @atmosphereCurve
        {
            @key,0 = 0 185
            @key,1 = 1 165
        }
    }
    !MODULE[ModuleAlternator] {}
    @EFFECTS
    {
        @running_closed
        {
            @AUDIO
            {
                @clip = KWRocketry/Soundbank/sound_altloop2
                @volume,1 = 0.1 0.4
                volume = 1.0 1.0
            }
            !PREFAB_PARTICLE {}
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = smokethrust
                modelName = MP_Nazari/FX/smokebooster
                transformName = FX3Transform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.10 0.20
                emission = 1.00 0.50

                // life of particles in seconds
                energy = 0.00 0.80
                energy = 1.00 1.20

                // particle speed
                speed = 0.00 0.40
                speed = 1.00 0.50

                // emitter position
                offset = 0.00 0.00
                offset = 1.00 1.50

                // grow % per second
                grow = 0.00 0.60
                grow = 1.00 0.70
            }
            !MODEL_MULTI_PARTICLE {}
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamethrust
                modelName = Squad/FX/ksX_Exhaust
                transformName = FX2Transform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.10 0.50
                emission = 1.00 1.20

                // life of particles in seconds
                energy = 0.00 0.80
                energy = 1.00 1.00

                // particle speed
                speed = 0.00 0.30
                speed = 1.00 0.40

                // emitter position
                offset = 0.00 -1.10
                offset = 1.00 -1.20

                // grow % per second
                grow = 0.00 -0.80
                grow = 1.00 -0.80
            }
        }
        @engage
        {
            @AUDIO
            {
                @clip = KWRocketry/Soundbank/sound_liq8
            }
        }
    }
}


//=================================================================================================
// UDMH + NTO
//=================================================================================================
@PART[OME]:Final
{
    @title = Odyssey Satellite Engine
    @node_stack_top = 0.0, -0.1, 0.0,       0.0, 1.0, 0.0,  1 // payload
    @node_stack_top1 = 0.0, -0.1, 0.0,      0.0, 1.0, 0.0,  0 // toroidal tank
    node_stack_mid = 0.0, -0.2, 0.0,        0.0, 1.0, 0.0,  2 // decoupler
    @node_stack_bottom = 0.0, -0.8, 0.0,    0.0, 1.0, 0.0,  1 // engine bottom (probably not used)
    @mass = 0.15
    @maxTemp = 2300
    !fx_exhaustFlame_blue_small = DELETE
    !fx_exhaustLight_blue = DELETE
    !fx_smokeTrail_light  = DELETE
    !sound_engage = DELETE
    !sound_loop = DELETE
    !sound_off = DELETE
    !sound_out = DELETE
    !MODULE[TweakScale] {}
    MODULE
    {
        name = TweakScale
        type = Scale_Stack
    }
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 25 // vacuum rated
        @heatProduction = 145
        @PROPELLANT[LiquidFuel]
        {
            @name = UDMH
            @ratio = 0.466073093
        }
        @PROPELLANT[Oxidizer]
        {
            @name = NTO
            @ratio = 0.533926907
        }
        @atmosphereCurve
        {
            @key,0 = 0 350
            @key,1 = 1 120
        }
    }
    !EFFECTS{}
    EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                clip = KWRocketry/Soundbank/sound_spsloop
                volume = 0.0 0.0
                volume = 1.0 1.0
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamethrust
                modelName = AerojetKerbodyne/FX/OMEFlame
                transformName = thrustTransform

                // number of particles per second
                emission = 0.00 0.00
                emission = 0.10 0.50
                emission = 1.00 1.20

                // life of particles in seconds
                energy = 0.0 0.90
                energy = 1.0 1.10

                // particle speed
                speed = 0.00 0.40
                speed = 1.00 1.00

                // emitter position
                offset = 0.0 -0.05
                offset = 1.0 -0.25

                // grow % per second
                grow = 0.00 4.00
                grow = 1.00 10.00
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperstart
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout
                transformName = thrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = AerojetKerbodyne/Sounds/upperout
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
    !MODULE[ModuleGimbal] {}
}
